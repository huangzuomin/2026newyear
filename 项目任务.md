 
# 项目说明（给 WebCoding 的输入稿）

## 1) 项目名称

**NewYear Card Maker（元旦·我的 2026 开场卡）**

## 2) 目标

做一个“模板驱动”的元旦创意卡生成工具：
用户在 20 秒内生成可转发的官方质感卡片（竖版/横版），并带“同款入口”促进裂变回流。

核心策略：**模板主导 + AI 变体增强**（AI 只做短句微调与元素组合，不自由发挥）。

## 3) 用户流程

1. 首页选择模板（默认 T-01 新年状态声明卡）
2. 选择状态母题 + 语气（可选城市/身份、视觉风格）
3. 立即生成 3 张预览
4. 选一张 → 导出图片（PNG）→ 分享引导（复制文案/长按保存）
5. 分享图内含“同款入口”（短链接/二维码参数）

## 4) 模板（MVP 三个）

### T-01 新年状态声明卡（主模板）

字段：

* `topic_id`（必选，状态母题）
* `tone`（必选：克制/温柔/清醒/坚定）
* `style`（可选：极简/现代/国风）
* `signature`（可选：城市或身份 ≤6字）

固定文案结构：年份 + 主句 + 落款（可选）

### T-02 年度交接卡

字段：

* `learned`（必填 ≤6字）
* `try`（必填 ≤6字）
* `tone`（可选）

### T-03 新年角色卡

字段：

* `role_id`（必选）

固定文案结构：`2026 属于 ××× 的人`

## 5) 生成与导出方式（建议实现）

前端用 HTML/CSS 渲染模板，使用 **Canvas** 或 **html-to-image** 导出 PNG。

* 预览：DOM 渲染（保证速度）
* 导出：将选中卡片节点转为 PNG（含水印角标、同款入口）

## 6) “同款入口”机制

生成链接带参数，例如：

* `?tpl=T01&topic=05&tone=calm&style=minimal`
  分享图中展示一个二维码/短链接指向该 URL，别人打开直接进入同款并可一键生成。

## 7) AI 变体增强（可开关）

**不开 AI 也能跑通 MVP**。开 AI 时只做两件事：

1. 文案微调：在母题不变的前提下，输出 3 个语气版本（同义替换/轻润色）
2. 元素组合：按风格选择背景元素（烟火/日历/光斑/留白等）

AI 输出必须受限：

* 不许新增主题
* 不许引入敏感表达
* 不许超过 22 字主句

（实现方式：后端提供 `/api/variant`，前端调用；或先写死母题×语气的映射表）

## 8) 页面与路由

* `/` 首页（模板选择 + 最近热门）
* `/create/:tpl` 生成页（字段选择 + 预览）
* `/result` 结果页（选中卡片 + 导出 + 分享）
* `/gallery`（可选）作品墙（仅展示匿名模板示例，MVP 可不做）

## 9) 数据结构（JSON 配置驱动）

模板配置建议放在 `src/config/`：

* `topics.json`：状态母题库（id、text、tags）
* `roles.json`：角色库
* `templates.ts`：模板参数、布局配置、可用元素、字体策略
* `copywriting.ts`：分享文案模板（可一键复制）

## 10) 必要的质量与限制

* 首屏可交互 < 2 秒
* 生成预览 < 300ms（纯前端）
* 导出 PNG < 2 秒
* 文案长度与换行策略固定（防止排版炸裂）
* 所有素材/字体必须可商用（MVP 可用系统字体先替代）

---

# 任务清单（按迭代拆解，WebCoding 直接照做）

## 迭代 0：工程与基础设施（0.5 天）

* [ ] 初始化前端项目（建议：Next.js 或 Vite + React + TS）
* [ ] 路由与页面骨架：`/`、`/create/:tpl`、`/result`
* [ ] 约定 UI 组件：按钮、单选、卡片、toast、loading
* [ ] 约定导出工具：`html-to-image` 或 `dom-to-image-more`

验收：

* 能从首页跳转到 create 页，显示空白卡片占位。

---

## 迭代 1：模板配置驱动（1 天）

* [ ] 建立 `topics.json / roles.json`
* [ ] 建立 `templates.ts`：T01/T02/T03 的字段定义、默认值、渲染组件映射
* [ ] Create 页渲染“表单控件 + 实时预览”（仅 1 张预览先）
* [ ] Result 页接收选中参数并展示卡片

验收：

* 三个模板都能填字段，预览不报错，参数可通过 URL 复现。

---

## 迭代 2：三张候选 + 选中（0.5–1 天）

* [ ] 根据同一组输入生成 3 张候选（差异来自 style/元素组合/排版微变）
* [ ] 候选卡片列表可点击选中
* [ ] 选中后进入 Result 页

验收：

* 用户不改任何东西也能一键生成 3 张并选一张进入结果页。

---

## 迭代 3：导出 PNG（1 天）

* [ ] Result 页“导出图片”按钮
* [ ] 导出含：角标水印 + 同款入口（短链文本/二维码）
* [ ] 移动端适配：导出后提示“长按保存/系统分享”

验收：

* 导出图片清晰、比例正确、文字不糊、可保存到相册。

---

## 迭代 4：同款裂变闭环（0.5–1 天）

* [ ] URL 参数规范（tpl + 字段）
* [ ] 分享区：一键复制分享文案（含链接）
* [ ] 图片内二维码生成（可用前端二维码库 `qrcode`）
* [ ] 打开同款链接自动填充字段并可直接生成

验收：

* A 生成→导出→B 扫码打开→一键生成自己的版本（闭环完成）。

---

## 迭代 5：内容与风控（0.5–1 天）

* [ ] 文案长度限制与换行规则（超长截断/缩放策略）
* [ ] 敏感词/禁用词简单过滤（本地词表即可）
* [ ] 可选：signature 仅允许中英文、数字、空格，≤6 字

验收：

* 输入极端情况不炸版；出现违规字符会提示并阻止生成。

---

## 迭代 6（可选）：AI 变体增强（1–2 天）

两种路线选其一：

**A. 纯前端映射（推荐先做）**

* [ ] `topic_id + tone` → 预写 3 个变体（配置表）
* [ ] 候选卡片使用变体文案

**B. 后端 AI 服务**

* [ ] 新增 `/api/variant`：入参（tpl、topic_text、tone、limit）出参（variants[]）
* [ ] 加“AI 开关”与失败降级（失败回退到配置表）
* [ ] 记录简单日志（请求次数、耗时、失败率）

验收：

* AI 失败不影响主流程；生成速度仍可接受。

---

# 交付物清单（项目完成时应包含）

* [ ] 可部署前端代码（含配置文件）
* [ ] 三模板完整可用（T01/T02/T03）
* [ ] 导出 PNG + 二维码同款入口
* [ ] 内容配置（topics/roles/share copy）
* [ ] README：本地运行、构建部署、配置说明

---

# 建议的技术栈（省事优先）

* 前端：Next.js + React + TypeScript + Tailwind（或 Vite + React）
* 导出：`html-to-image`
* 二维码：`qrcode`
* （可选）后端：Next API Routes / Express（仅当你要 AI 变体）

 